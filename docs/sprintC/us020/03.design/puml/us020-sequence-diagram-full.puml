@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

title UI Sequence Diagram (SSD) - Alternative One

autonumber

actor "Green Space Manager" as Employee
participant ":RegisterGreenSpaceUI" as UI
participant ":RegisterGreenSpaceController" as CTRL
participant ":Repositories" as RepositorySingleton
participant "repositories\n:Repositories" as PLAT
participant "authenticationRepository\n:AuthenticationRepository" as authenticationRepository
participant "userSession\n:UserSession" as UserSession
participant "email\n:Email" as Email
participant "greenSpaceRepository\n:GreenSpaceRepository" as greenSpaceRepository
participant ":GreenSpace" as green
participant ":Size" as Size
participant "greenSpace\n:GreenSpace" as EMPREGO


activate Employee

    Employee -> UI : ask to register a green space
    activate UI

    UI -> CTRL** : create
    activate CTRL
        CTRL -> CTRL : getGreenSpaceRepository()
        activate CTRL


        CTRL -> RepositorySingleton : getInstance()
        activate RepositorySingleton

        RepositorySingleton --> CTRL: repositories
        deactivate RepositorySingleton


        CTRL -> PLAT : getGreenSpaceRepository()
        activate PLAT

        PLAT --> CTRL: greenSpaceRepository
        deactivate PLAT
        CTRL -->CTRL : greenSpaceRepository

        deactivate CTRL



    UI --> Employee : request data (name,area,address)
    deactivate CTRL
    deactivate UI

    Employee -> UI : types requested data
    activate UI

    UI -> CTRL : getGreenSpacesSizes()
        activate CTRL

           CTRL ->  green : GreenSpace
                activate green

                green -> Size: Size

                    activate Size
                    Size -> Size : values()

                        Size --> green :sizeList
                    deactivate Size

                    green --> CTRL : sizeList
                deactivate green
            CTRL --> UI : sizeList

        deactivate CTRL

     UI --> Employee : shows list of sizes\n and request a selection
     deactivate UI

     Employee -> UI : select an option

    activate UI

    UI --> Employee : show all data registered\n and the confirmation menu
    deactivate UI

    Employee -> UI : submits data
    activate UI

    UI -> CTRL : registerGreenSpace(name,size,area)
    activate CTRL



    CTRL -> CTRL : registerGreenSpace(name,size,area)
    activate CTRL

        CTRL -> CTRL : getResponsible()
                    activate CTRL

                        CTRL -> PLAT  : getAuthenticationRepository()
                        activate PLAT

                        PLAT --> CTRL : authenticationRepository
                        deactivate PLAT

                        CTRL -> authenticationRepository : getCurrentUserSession()
                        activate authenticationRepository

                            authenticationRepository --> CTRL : currentUserSession
                        deactivate authenticationRepository

                        CTRL -> UserSession : getUserId()
                        activate UserSession

                            UserSession --> CTRL : userSession
                        deactivate UserSession

                        CTRL -> Email : getEmail()
                        activate Email

                            Email --> CTRL : email
                        deactivate Email
                    CTRL --> CTRL : email
                    deactivate CTRL

            deactivate CTRL
    |||
            CTRL -> greenSpaceRepository : registerGreenSpace(name,size,area,email)

    activate greenSpaceRepository

    greenSpaceRepository -> EMPREGO** : create

    greenSpaceRepository -> greenSpaceRepository : addGreenSpace(greenSpace)

    activate greenSpaceRepository
    greenSpaceRepository -> greenSpaceRepository : validate(greenSpace)
    activate greenSpaceRepository

    deactivate greenSpaceRepository

    deactivate greenSpaceRepository



    greenSpaceRepository --> CTRL : greenSpace
    deactivate greenSpaceRepository
    CTRL --> UI : greenSpace
    deactivate CTRL


        UI --> Employee : shows operation (in)success
    deactivate UI

@enduml