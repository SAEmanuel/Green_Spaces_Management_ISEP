@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

title UI Sequence Diagram (SSD) - Alternative One

autonumber

actor "Green Space Manager" as Employee
participant ":RegisterGreenSpaceUI" as UI
participant ":RegisterGreenSpaceController" as CTRL
participant ":Repositories" as RepositorySingleton
participant "repositories\n:Repositories" as PLAT
participant "authenticationRepository\n:AuthenticationRepository" as authenticationRepository
participant "greenSpaceRepository\n:GreenSpaceRepository" as greenSpaceRepository
participant "greenSpace\n:GreenSpace" as EMPREGO


activate Employee

    Employee -> UI : ask to register a green space
    activate UI

    UI -> CTRL** : create
    activate CTRL
        CTRL -> CTRL : getGreenSpaceRepository()
        activate CTRL


        CTRL -> RepositorySingleton : getInstance()
        activate RepositorySingleton

        RepositorySingleton --> CTRL: repositories
        deactivate RepositorySingleton


        CTRL -> PLAT : getGreenSpaceRepository()
        activate PLAT

        PLAT --> CTRL: greenSpaceRepository
        deactivate PLAT
        CTRL -->CTRL : greenSpaceRepository

        deactivate CTRL



    UI --> Employee : request data (name,area,address)
    deactivate CTRL
    deactivate UI

    Employee -> UI : types requested data
    activate UI

    UI -> CTRL : getGreenSpacesSizes()
        activate CTRL

           CTRL ->  greenSpaceRepository : getGreenSpacesSizes()
            activate greenSpaceRepository

                greenSpaceRepository -> EMPREGO: GreenSpace.Size.values()
                activate EMPREGO

                EMPREGO --> greenSpaceRepository : sizesList
                deactivate EMPREGO
                greenSpaceRepository --> CTRL : sizesList
            deactivate greenSpaceRepository
            CTRL --> UI : sizesList

        deactivate CTRL

     UI --> Employee : shows list of sizes\n and request a selection
     deactivate UI

     Employee -> UI : select an option

    activate UI

    UI --> Employee : show all data registered\n and the confirmation menu
    deactivate UI

    Employee -> UI : submits data
    activate UI

    UI -> CTRL : registerGreenSpace(name,size,area)
    activate CTRL



    CTRL -> CTRL : registerGreenSpace(name,size,area)
    activate CTRL

        CTRL -> CTRL : getResponsible()
        activate CTRL

        CTRL -> PLAT : getAuthenticationRepository()
        activate PLAT

        PLAT --> CTRL : authenticationRepository
        deactivate PLAT

        CTRL -> authenticationRepository : getCurrentUserSession()
        activate authenticationRepository

            authenticationRepository -> authenticationRepository :getUserId()
            activate authenticationRepository

                authenticationRepository -> authenticationRepository : getEmail()
                activate authenticationRepository

                    authenticationRepository --> authenticationRepository
                deactivate authenticationRepository
                    authenticationRepository --> authenticationRepository
            deactivate authenticationRepository


            authenticationRepository --> CTRL : email
        deactivate authenticationRepository
            CTRL --> CTRL: resposible

            deactivate CTRL
    |||
            CTRL -> greenSpaceRepository : registerGreenSpace(name,size,area,resposible)

    deactivate CTRL
    activate greenSpaceRepository

    greenSpaceRepository -> EMPREGO : create

    greenSpaceRepository -> greenSpaceRepository : addGreenSpace(greenSpace)

    activate greenSpaceRepository
    greenSpaceRepository -> greenSpaceRepository : validate(greenSpace)
    activate greenSpaceRepository
    greenSpaceRepository --> greenSpaceRepository
    deactivate greenSpaceRepository
    greenSpaceRepository --> greenSpaceRepository
    deactivate greenSpaceRepository



    greenSpaceRepository --> CTRL : greenSpace
    deactivate greenSpaceRepository
    CTRL --> UI : greenSpace
    deactivate CTRL


        UI --> Employee : shows operation (in)success
    deactivate UI

@enduml