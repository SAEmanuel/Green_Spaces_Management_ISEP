@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

autonumber

actor "Fleet Manager" as FM

participant ":CheckupRegisterUI" as UI
participant ":CreateCheckUpController" as CTRL
participant ":Repositories" as RepositorySingleton
participant "repositories\n:Repositories" as PLAT
participant "vehicleRepository\n:VehicleRepository" as vehicleRepository
participant "vehicleCheckUpRepository:\nVehicleCheckUpRepository" as VehicleCheckUpRepository
participant "checkUp\n:CheckUp" as CHECKUP

activate FM

FM -> UI : Asks to register a vehicle's check-up
activate UI

UI -> FM : Requests data (plateID)
deactivate UI

FM -> UI : Submits requested data
activate UI

UI -> CTRL : create

UI -> CTRL : getVehicleByPlateID(plateID)

deactivate UI

activate CTRL

CTRL -> RepositorySingleton : getInstance()
activate RepositorySingleton

RepositorySingleton --> CTRL: repositories
deactivate RepositorySingleton

CTRL -> PLAT : getVehicleRepository()
activate PLAT

PLAT --> CTRL: vehicleRepository
deactivate PLAT

CTRL -> vehicleRepository : vehicleListContainsByPlate(plateID)

activate vehicleRepository

vehicleRepository -> CTRL : vehicle
deactivate vehicleRepository


CTRL -> UI : vehicle
deactivate CTRL

activate UI

UI -> FM : Requests data (checkUpDate, checkUpKms)
deactivate UI

FM -> UI : Submits requested data
activate UI

UI -> CTRL : createVehicleCheckUp(vehicle, checkUpDate, checkUpKms)
deactivate UI
activate CTRL

CTRL -> VehicleCheckUpRepository : registerCheckUp(vehicle, checkUpDate, checkUpKms)
activate VehicleCheckUpRepository

VehicleCheckUpRepository -> CHECKUP** : create
VehicleCheckUpRepository -> VehicleCheckUpRepository : addCheckUp(checkUp)


 VehicleCheckUpRepository -> VehicleCheckUpRepository : validateCheckUp(checkUp)

 VehicleCheckUpRepository -> VehicleCheckUpRepository : setLastKmsCheckUp(vehicle, checkUpKms)

VehicleCheckUpRepository -> CTRL : checkUp
deactivate VehicleCheckUpRepository


deactivate VehicleCheckUpRepository

CTRL -> UI : checkUp


deactivate CTRL
activate UI


UI -> FM : Displays operation success
deactivate UI

@enduml