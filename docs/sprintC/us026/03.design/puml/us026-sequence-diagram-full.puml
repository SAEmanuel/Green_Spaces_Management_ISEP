@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

title UI Sequence Diagram (SSD) - Alternative One

autonumber

actor "Green Space Manager" as Employee
participant ":ToDoListUI" as UI
participant ":ToDoListController" as CTRL
participant ":ApplicationSession" as _APP
participant "appSession\n:ApplicationSession" as APP
participant "currentSession\n:UserSession" as SESSAO
participant "responsibleEmail\n:String" as EMAIL
participant ":Repositories" as RepositorySingleton
participant "repositories\n:Repositories" as PLAT
participant "agenda\n:AgendaRepository" as AGENDA
participant "agendaEntries\n: List<AgendaEntry>" as listAgenda
participant "vehicleRepository\n:VehicleRepository" as VEHICLEREPOSITORY
participant "availableVehicles\n: List<Vehicle>" as listVehicle
participant "v1\n:Vehicle" as v1
participant "task1\n:AgendaEntry" as task1


activate Employee

    Employee -> UI : ask to assign a vehicle to a task
    activate UI

    UI -> CTRL** : create

    UI -> CTRL : getAgendaEntriesByResponsible()
    activate CTRL

    CTRL -> CTRL : getResponsible()
    activate CTRL

                    CTRL -> _APP: getInstance()
                    activate _APP
                        _APP -> CTRL: appSession
                    deactivate _APP


                    CTRL -> APP: getCurrentSession()
                    activate APP

                        APP --> CTRL: currentSession
                    deactivate APP

                    CTRL -> SESSAO: getUserEmail()
                    activate SESSAO





                    deactivate SESSAO

                    deactivate CTRL
                    |||

                    CTRL -> CTRL : getAgendaEntriesByResponsible(responsibleEmail)
                    activate CTRL

                    CTRL -> RepositorySingleton : getInstance()
                    activate RepositorySingleton

                    RepositorySingleton --> CTRL: repositories
                    deactivate RepositorySingleton

                    CTRL -> PLAT : getAgenda()
                    activate PLAT

                    PLAT --> CTRL: Agenda
                    deactivate PLAT

                    CTRL -> AGENDA : getAgendaEntriesByResponsible(responsibleEmail)

                    activate AGENDA

                    AGENDA -> CTRL : agendaEntries
                    deactivate AGENDA

                    deactivate CTRL


                    CTRL -> UI : agendaEntries

                    deactivate CTRL


        UI -> Employee : shows list of agenda entries

        Employee -> UI : selects an agenda entry from the list

        UI -> CTRL : getAvailableVehicles()
        activate CTRL
                            activate CTRL

                            CTRL -> AGENDA : getAgendaEntries()

                            activate AGENDA

                            AGENDA -> CTRL : agendaEntries
                            deactivate AGENDA
                           |||
                            deactivate CTRL

                            CTRL -> CTRL : getAvailableVehicles(agendaEntries)

                             activate CTRL

                                                        CTRL -> RepositorySingleton : getInstance()
                                                        activate RepositorySingleton

                                                        RepositorySingleton --> CTRL: repositories
                                                        deactivate RepositorySingleton

                                                        CTRL -> PLAT : getVehicleRepository()
                                                        activate PLAT

                                                        PLAT --> CTRL: VehicleRepository
                                                        deactivate PLAT

                                                        CTRL -> VEHICLEREPOSITORY :getAvailableVehicles(agendaEntries)

                                                        activate VEHICLEREPOSITORY

                                                        VEHICLEREPOSITORY -> CTRL : availableVehicles
                                                        deactivate VEHICLEREPOSITORY

                                                        deactivate CTRL


    CTRL -> UI : availableVehicles
    deactivate CTRL

    UI -> Employee : shows list of available vehicles

    Employee -> UI : selects a vehicle from the list


        UI --> Employee : shows the confirmation menu
    deactivate UI

    Employee -> UI : submits data
    activate UI

    UI -> CTRL : assignVehicle(agendaTaskID, vehicleID)
    activate CTRL
    CTRL -> VEHICLEREPOSITORY : getVehicleByID(vehicleID)
    activate VEHICLEREPOSITORY

    deactivate VEHICLEREPOSITORY

    CTRL -> AGENDA : getTaskByID(agendaTaskID)
    activate AGENDA

     deactivate AGENDA

    CTRL -> AGENDA : assignVehicle(task1, v1)
      deactivate CTRL
    activate AGENDA

    AGENDA -> AGENDA : addVehicle(v1)

    AGENDA --> CTRL : success
    deactivate AGENDA

    activate CTRL
    CTRL --> UI : success
    deactivate CTRL

        UI --> Employee : shows operation (in)success
    deactivate UI

@enduml