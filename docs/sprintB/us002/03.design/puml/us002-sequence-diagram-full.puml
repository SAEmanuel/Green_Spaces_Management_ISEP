@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

autonumber

'hide footbox
actor "Human Resources Manager" as HRM
participant ":RegisterJobUI" as UI
participant ":RegisterJobController" as CTRL
participant ":Repositories" as RepositorySingleton
participant "repositories\n:Repositories" as PLAT
participant "jobListRepository\n:jobListRepository" as jobRepository
participant "job\n:Job" as EMPREGO

activate HRM

        HRM -> UI : asks to register a new job

        activate UI

            UI -> CTRL** : register

            UI -> CTRL : getJobList()
            activate CTRL

                CTRL -> RepositorySingleton : getInstance()
                activate RepositorySingleton

                    RepositorySingleton --> CTRL: repositories
                deactivate RepositorySingleton

                CTRL -> PLAT : getJobRepository()
                activate PLAT

                    PLAT --> CTRL: jobListRepository
                deactivate PLAT

                CTRL -> jobRepository : getJobList()
                activate jobRepository

                    jobRepository --> CTRL : jobList
                deactivate jobRepository

                CTRL --> UI : jobList
            deactivate CTRL




            UI --> HRM : shows job list
            UI --> HRM : types requested data (name) or asks to leave
        deactivate UI


    HRM -> UI : types requested data (name)
    activate UI

        UI --> HRM : asks data confirmation
        deactivate UI

        HRM -> UI : confirms data
            activate UI


            UI -> CTRL : registerJob(name)
            activate CTRL


                CTRL -> EMPREGO: registerJob(name)
                deactivate CTRL




                    activate EMPREGO
                        EMPREGO --> EMPREGO : validateNameJob(job)

                        loop [for each job name
                          EMPREGO -> EMPREGO : validateNameJob(job)
                            activate EMPREGO

                                 EMPREGO --> EMPREGO : true/false
                            deactivate EMPREGO
                        end


                        EMPREGO --> jobRepository : job
                    deactivate EMPREGO

                    activate jobRepository

                    jobRepository -> jobRepository: addJob(job)


                    activate jobRepository
                        jobRepository -> jobRepository: validateJob(job)
                        activate jobRepository
                            jobRepository --> jobRepository
                        deactivate jobRepository

                        jobRepository --> jobRepository
                    deactivate jobRepository

                    jobRepository --> CTRL : job
                     activate CTRL

                deactivate jobRepository

                CTRL --> UI: job
                deactivate CTRL
                UI --> HRM: Confirms the (un)success of the operation.
        deactivate UI
    deactivate HRM

@enduml