@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

autonumber

actor "Fleet Manager" as FM

participant ":CheckupRegisterUI" as UI
participant ":CreateCheckUpController" as CTRL
participant ":Repositories" as RepositorySingleton
participant "repositories\n:Repositories" as PLAT
participant "vehicleRepository\n:VehicleRepository" as vehicleRepository
participant "vehicle\n:Vehicle" as VEHICLE
participant "vehicleCheckUpRepository:\nVehicleCheckUpRepository" as VehicleCheckUpRepository

activate FM

FM -> UI : Asks to register a vehicle's check-up
activate UI

UI -> FM : Requests data (vehicleLicensePlate)
deactivate UI

FM -> UI : Submits requested data
activate UI

UI -> CTRL** : create

UI -> CTRL : getVehicleByLicensePlate(vehicleLicensePlate)

deactivate UI

activate CTRL
CTRL -> RepositorySingleton : getInstance()
activate RepositorySingleton

RepositorySingleton --> CTRL: repositories
deactivate RepositorySingleton

CTRL -> PLAT : getVehicleRepository()
activate PLAT

PLAT --> CTRL: vehicleRepository
deactivate PLAT

CTRL -> vehicleRepository : getVehicleByLicensePlate(vehicleLicensePlate)

activate vehicleRepository

vehicleRepository -> CTRL : vehicle
deactivate vehicleRepository


CTRL -> UI : vehicle
deactivate CTRL

activate UI

UI -> FM : Requests data (date, currentMileage)
deactivate UI

FM -> UI : Submits requested data
activate UI

UI -> CTRL : createVehicleCheckUp(vehicle, date, currentMileage)
deactivate UI
activate CTRL

CTRL -> VehicleCheckUpRepository : createVehicleCheckUp(vehicle, date, currentMileage)
deactivate CTRL
activate VehicleCheckUpRepository


VehicleCheckUpRepository -> VehicleCheckUpRepository : validateDate(date)
VehicleCheckUpRepository -> VehicleCheckUpRepository : validateDate(currentMileage)
VehicleCheckUpRepository -> VehicleCheckUpRepository : createCheckUp(vehicle, date, (currentMileage)

VehicleCheckUpRepository -> CTRL : true/false

deactivate VehicleCheckUpRepository


activate CTRL

CTRL -> UI : true/false
deactivate CTRL
activate UI


UI -> FM : Displays operation success
deactivate UI













@enduml
