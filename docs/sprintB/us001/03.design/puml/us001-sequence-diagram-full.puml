@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

autonumber

'hide footbox
actor "Human Resources Manager" as HRM
participant ":RegisterSkillUI" as UI
participant ":RegisterSkillController" as CTRL
participant ":Repositories" as RepositorySingleton
participant "repositories\n:Repositories" as PLAT
participant "skillListRepository\n:skillListRepository" as skillRepository
participant ":ApplicationSession" as _APP
participant "appSession\n:ApplicationSession" as APP
participant "currentSession\n:UserSession" as SESSAO
participant "organizationRepository:\nOrganizationRepository" as OrganizationRepository
participant "organization\n:Organization" as ORG
participant "skill\n:Skill" as EMPREGO

activate HRM

        HRM -> UI : asks to register a new skill

        activate UI

            UI -> CTRL** : register

            UI -> CTRL : getSkillList()
            activate CTRL

                CTRL -> RepositorySingleton : getInstance()
                activate RepositorySingleton

                    RepositorySingleton --> CTRL: repositories
                deactivate RepositorySingleton

                CTRL -> PLAT : getSkillRepository()
                activate PLAT

                    PLAT --> CTRL: skillListRepository
                deactivate PLAT

                CTRL -> skillRepository : getSkillList()
                activate skillRepository

                    skillRepository --> CTRL : skillList
                deactivate skillRepository

                CTRL --> UI : skillList
            deactivate CTRL




            UI --> HRM : show skill list
            UI --> HRM : request data (name)
        deactivate UI


    HRM -> UI : types requested data (name)
    activate UI

        UI --> HRM : shows requested data typed
        deactivate UI

        HRM -> UI : submits data
            activate UI


            UI -> CTRL : registerSkill(name)
            activate CTRL

                activate CTRL

                    CTRL -> RepositorySingleton : getInstance()
                    activate RepositorySingleton

                        RepositorySingleton --> CTRL: repositories
                    deactivate RepositorySingleton

                    CTRL -> PLAT : getSkillListRepository()
                    activate PLAT

                        PLAT -> CTRL : SkillListRepository
                    deactivate PLAT

                    CTRL -> skillRepository : getSkillList()
                    activate skillRepository

                        skillRepository --> CTRL : skillList
                    deactivate skillRepository
                        CTRL --> CTRL : skillList
                deactivate CTRL

                |||
                CTRL -> ORG: registerSkill(name)
                activate ORG

                    ORG -> EMPREGO**: registerSkill(name)

                    activate EMPREGO
                        EMPREGO --> EMPREGO : validateNameSkill(skill)

                        loop [for each skill name
                          EMPREGO -> EMPREGO : validateNameSkill(skill)
                            activate EMPREGO

                                 EMPREGO --> EMPREGO : true/false
                            deactivate EMPREGO
                        end

                        EMPREGO --> ORG : skill
                    deactivate EMPREGO


                    ORG -> ORG: addSkill(skill)


                    activate ORG
                        ORG -> ORG: validateSkill(skill)
                        activate ORG
                            ORG --> ORG
                        deactivate ORG

                        ORG --> ORG
                    deactivate ORG

                    ORG --> CTRL : skill

                deactivate ORG

                CTRL --> UI: skill
                deactivate CTRL
                UI --> HRM: Confirms the success of the operation.
        deactivate UI
    deactivate HRM

@enduml